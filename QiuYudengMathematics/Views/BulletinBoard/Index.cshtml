<input type="button" value="Query" onclick="Query()" />
<input type="button" value="SingleQuery" onclick="SingleQuery()" />
<input type="button" value="Insert" onclick="Insert()" />
<input type="button" value="Update" onclick="Update()" />

<div id="app" class="account">
    <div class="account__container">
        <div class="account__search-bar--flex">
            <input @@input="onInput($event)" placeholder="請輸入科目" type="search">
            <div class="account__btn-wrapper">
                <a @@click="addPerson()" class="blue-btn">新增</a>
            </div>
        </div>
        <div class="account__table">
            <div class="account__tr">
                <div class="account__th">科目</div>
                <div class="account__th">內容</div>
                <div class="account__th">年級</div>
                <div class="account__th">狀態</div>
                <div class="account__th">管理</div>
            </div>
            <div class="account__tr" v-for="item in eachPageList" :key="item.Account">
                <div class="account__td">{{item.Account}}</div>
                <div class="account__td">{{item.Name}}</div>
                <div class="account__td">{{item.GradeName}}</div>
                <div class="account__td">
                    <i v-if="item.Enable" style="color:forestgreen" class="far fa-circle"></i>
                    <i v-else style="color:red" class="fas fa-times"></i>
                </div>
                <div class="account__td"><a @@click.prevent="showPopUp(item.Account)"><i class="fas fa-cog"></i></a></div>
            </div>
        </div>
        <div v-show="curList.length > 10" class="pagenation">
            <a @@click.prevent="setPage(1)">First</a>
            <a @@click.prevent="setPage(previousPage)">Previous</a>
            <a v-for="(n, index) in totalPageCount" v-show="pageRule(n)" v-bind:class=" currPage === n ? 'active' : '' " :key="n"
               @@click.prevent="setPage(n)">{{n}}</a>
            <a @@click.prevent="setPage(nextPage)">Next</a>
            <a @@click.prevent="setPage(totalPageCount)">Last</a>
        </div>
    </div>
    <div v-show="pupUpOn" class="popup--wrapper">
        <div class="popup">
            <div class="popup--heading">
                <span>學生管理</span>
                <i @@click="hidePopUp" class="fas fa-times"></i>
            </div>
            <div class="popup--body">
                <div v-show="info.Account"><p>帳號</p><input class="width200" :value="info.Account" disabled /></div>
                <div><p>姓名</p><input class="width200" :value="info.Name" v-model="info.Name" /></div>
                <div>
                    <p>年級</p>
                    <div class="width200">
                        <input type="radio" id="one" value="1" v-model="info.Grade">
                        <label for="one">高一</label>
                        <input type="radio" id="two" value="2" v-model="info.Grade">
                        <label for="two">高二</label>
                        <input type="radio" id="three" value="3" v-model="info.Grade">
                        <label for="three">高三</label>
                    </div>
                </div>
                <div>
                    <p>狀態</p>
                    <div class="width200">
                        <input type="checkbox" id="checkbox" v-model="info.Enable">
                        <label for="checkbox">{{ info.Enable?"啟用":"停用" }}</label>
                    </div>
                </div>
                <div>
                    <p>科目</p>
                    <div class="width200">
                        <div v-for="item in currentSubectList" class="subject-item">
                            <input type="checkbox" :id="item.ID" :value="String(item.ID)" v-model="checkedList">
                            <label :for="item.ID">{{item.SubjectName}}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="popup--footer">
                <a @@click="clearDevice(info.Account)" class="red-btn">清除裝置</a>
                <a @@click="pwdReset(info.Account)" class="red-btn">重置密碼</a>
                <a @@click="submit" class="blue-btn">儲存</a>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    const vm = new Vue({
        el: '#app',
        data: {
            posts: [],
            allSubjectList: []
        },
        mounted() {
        const data = {
            SubjectId: [], //科目(沒有就放空陣列，有放陣列(數字))
            Enable: null //啟用或停用
        };
        axios.post('@Url.Content("~/BulletinBoard/Query")', data)
            .then(res => {
                this.posts = res.data.Data
            });
        //取得所有科目表
        axios.post('@Url.Content("~/Account/GetGradeSubject")')
            .then(res => {
                this.allSubjectList = res.data.Data
            });

    },
    })
</script>

<script type="text/javascript">
    function Query() {
        var data = {
            SubjectId: [], //科目(沒有就放空陣列，有放陣列(數字))
            Enable: null //啟用或停用
        };
        $.post("@(Url.Content("~/BulletinBoard/Query"))", data, function (x) {
            if(x.Data.length>0)
                alert(x.Data[0].Content);
            else
                alert('查無資料');
        });
    };

    function SingleQuery() {
        $.post("@(Url.Content("~/BulletinBoard/SingleQuery?Seq="))" + 1, function (x) {
            alert(x.Data.Content);
        });
    };

    function Insert() {
        var data = {
            Content: '大家好',  //內容
            SubjectId: 2, //科目
            Enable: true //啟用/停用
        };
        $.post("@(Url.Content("~/BulletinBoard/Insert"))", data, function (x) {
            alert(x.Msg);
        });
    };

    function Update() {
        var data = {
            BulletinBoardSeq: 1, //PK
            Content: '大家安安',  //內容
            SubjectId: 2, //科目
            Enable: false //啟用/停用
        };
        $.post("@(Url.Content("~/BulletinBoard/Update"))", data, function (x) {
            alert(x.Msg);
        });
    };
</script>